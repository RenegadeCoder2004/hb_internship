<!DOCTYPE html>
<html>
<head>
    <title>CRUD Without API</title>
</head>

<body>

<h2>CRUD Operation (Without API)</h2>

<!-- ================= FORM ================= -->

<label>Name</label><br>
<input type="text" id="name"><br><br>

<label>Email</label><br>
<input type="text" id="email"><br><br>

<label>Phone Number</label><br>
<input type="text" id="phone"><br><br>

<!-- ================= BUTTONS ================= -->

<button onclick="createData()">Submit</button>
<button onclick="readData()">Read</button>
<button onclick="updateData()">Update</button>
<button onclick="deleteData()">Delete</button>
<button onclick="clearForm()">Clear</button>

<script>
/* ===========================================
   TEMPORARY DATABASE
=========================================== */

let users = [];        // array of objects
let currentId = 1;     // auto increment id
let selectedId = null; // used for update/delete

/* ===========================================
   CREATE
=========================================== */

function createData() {

    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const phone = document.getElementById("phone").value.trim();

    /* -------- VALIDATION -------- */

    if (name === "" || email === "" || phone === "") {
        alert("All fields are required");
        return;
    }

    // email validation
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailPattern.test(email)) {
        alert("Invalid email format");
        return;
    }

    // phone validation
    if (phone.length !== 10 || isNaN(phone)) {
        alert("Phone number must be 10 digits");
        return;
    }

    /* -------- CREATE OBJECT -------- */

    const user = {
        id: currentId,
        name: name,
        email: email,
        phone: phone
    };

    users.push(user);
    currentId++;

    console.log("User Created:");
    console.log(users);

    clearForm();
}

/* ===========================================
   READ
=========================================== */

function readData() {
    console.log("All Users:");
    console.table(users);
}

/* ===========================================
   UPDATE
=========================================== */

function updateData() {

    const id = prompt("Enter ID to update:");

    const user = users.find(u => u.id == id);

    if (!user) {
        alert("User not found");
        return;
    }

    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const phone = document.getElementById("phone").value.trim();

    if (name === "" || email === "" || phone === "") {
        alert("Fill form before updating");
        return;
    }

    user.name = name;
    user.email = email;
    user.phone = phone;

    console.log("User Updated:");
    console.log(users);

    clearForm();
}

/* ===========================================
   DELETE
=========================================== */

function deleteData() {

    const id = prompt("Enter ID to delete:");

    const index = users.findIndex(u => u.id == id);

    if (index === -1) {
        alert("User not found");
        return;
    }

    const confirmDelete = confirm(
        "Are you sure you want to delete this record?"
    );

    if (!confirmDelete) return;

    users.splice(index, 1);

    console.log("User Deleted:");
    console.log(users);
}

/* ===========================================
   CLEAR FORM
=========================================== */

function clearForm() {
    document.getElementById("name").value = "";
    document.getElementById("email").value = "";
    document.getElementById("phone").value = "";
}

</script>

</body>
</html>
