<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <title>D5JS4</title>
    <style>
        table{
            border-collapse: collapse;
            margin-top: 20px;
        }
        td{
            width: 50px;
            height: 40px;
            border: 1px solid black;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>FULL HOUSE GAME [3*9]</h1>
    <p>Rules</p>
    <ul>
        <li>No Duplicate number should be generated.</li>
        <li>Generate a ticket for the user as shown in the image below, with valid data.</li>
        <li>No column can be empty.</li>
        <li>No row should be empty and only 5 numbers per row.</li>
        <li>Column should be having range in increasing order <br><b>i.e 1st column: 1-10,2nd column: 11-20 - Extra</b></li>
    </ul>

    <button onclick="generateTicket()">Generate Ticket</button>
    <table id="ticket"> </table>

    <script>
        // array Shuffling
        function shuffle(arr){
            for(let i=arr.length-1; i>0; i--){
                const j = Math.floor(Math.random() * (i+1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
        }
        // range
        function range(start, end){
            return Array.from({length:end-start+1}, (_,i) => start+i);
        }
        //Ticket Generation
        function generateTicket(){
            const columnRanges =[
                range(1, 10),
                range(11, 20),
                range(21, 30),
                range(31, 40),
                range(41, 50),
                range(51, 60),
                range(61, 70),
                range(71, 80),
                range(81, 90)
            ];
            columnRanges.forEach(shuffle);
            //empty 3*9
            let ticket = Array.from({length:3}, ()=> Array(9).fill(""));
            // each colmn has 1 number at least
            for(let col=0; col<9; col++){
                const row = Math.floor(Math.random() * 3);
                ticket[row][col] = columnRanges[col].pop();
            }
            //filling each row with 5 numbers
            for (let row = 0; row < 3; row++){
                let filled = ticket[row].filter(x => x !== "").length;
                while(filled<5){
                    let col = Math.floor(Math.random() * 9);
                    if(ticket[row][col] === "" && columnRanges[col].length > 0){
                        ticket[row][col] = columnRanges[col].pop();
                        filled++;
                    }
                }
            }
            //column Sorting
            for(let col=0; col<9; col++){
                let colValues = [];
                for(let row=0; row<3; row++){
                    if (ticket[row][col] !== ""){
                        colValues.push(ticket[row][col]);
                    }
                }
                colValues.sort((a,b) => a-b);
                let index = 0;
                for(let row=0; row<3; row++){
                    if(ticket[row][col]!==""){
                        ticket[row][col] = colValues[index++];
                    }
                }
            }
            renderTicket(ticket);
        }
        // Ticket Rendering
        function renderTicket(ticket){
            const table = document.getElementById("ticket");
            table.innerHTML = "";
            ticket.forEach(row => {
                const tr = document.createElement("tr");
                row.forEach(cell => {
                    const td = document.createElement("td");
                    td.textContent = cell;
                    tr.appendChild(td);
                });
                table.appendChild(tr);
            });
        }
    </script>
</body>
</html>